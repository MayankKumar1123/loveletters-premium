{"ast":null,"code":"import { w3cwebsocket as W3CWebSocket } from \"websocket\";\nconst socket = new W3CWebSocket((window.location.protocol === \"https:\" ? \"wss://\" : \"ws://\") + window.location.host + \"/ws\");\n\nsocket.onopen = () => {\n  console.log('WebSocket Client Connected');\n};\n\nfunction sendMessage(msg) {\n  // Wait until the state of the socket is not ready and send the message when it is...\n  waitForSocketConnection(function () {\n    console.log(\"message sent!!!\");\n    socket.send(msg);\n  });\n} // Make the function wait until the connection is made...\n\n\nfunction waitForSocketConnection(callback) {\n  setTimeout(function () {\n    if (socket.readyState === 1) {\n      console.log(\"Connection is made\");\n\n      if (callback != null) {\n        callback();\n      }\n    } else {\n      console.log(\"wait for connection...\");\n      waitForSocketConnection(callback);\n    }\n  }, 5); // wait 5 milisecond for the connection...\n}\n\nsendMessage('hey');\nexport default socket;","map":{"version":3,"sources":["/home/mayank/BoardGames/loveletters-premium/react/game/src/socket-context.js"],"names":["w3cwebsocket","W3CWebSocket","socket","window","location","protocol","host","onopen","console","log","sendMessage","msg","waitForSocketConnection","send","callback","setTimeout","readyState"],"mappings":"AAAA,SAASA,YAAY,IAAIC,YAAzB,QAA6C,WAA7C;AAEA,MAAMC,MAAM,GAAG,IAAID,YAAJ,CAAiB,CAAEE,MAAM,CAACC,QAAP,CAAgBC,QAAhB,KAA6B,QAA9B,GAA0C,QAA1C,GAAqD,OAAtD,IAAiEF,MAAM,CAACC,QAAP,CAAgBE,IAAjF,GAAwF,KAAzG,CAAf;;AAGAJ,MAAM,CAACK,MAAP,GAAgB,MAAM;AACpBC,EAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ;AACD,CAFD;;AAIA,SAASC,WAAT,CAAqBC,GAArB,EAAyB;AACrB;AACAC,EAAAA,uBAAuB,CAAC,YAAU;AAC9BJ,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACAP,IAAAA,MAAM,CAACW,IAAP,CAAYF,GAAZ;AACH,GAHsB,CAAvB;AAIH,C,CAED;;;AACA,SAASC,uBAAT,CAAiCE,QAAjC,EAA0C;AACtCC,EAAAA,UAAU,CACN,YAAY;AACR,QAAIb,MAAM,CAACc,UAAP,KAAsB,CAA1B,EAA6B;AACzBR,MAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;;AACA,UAAIK,QAAQ,IAAI,IAAhB,EAAqB;AACjBA,QAAAA,QAAQ;AACX;AACJ,KALD,MAKO;AACHN,MAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACAG,MAAAA,uBAAuB,CAACE,QAAD,CAAvB;AACH;AAEJ,GAZK,EAYH,CAZG,CAAV,CADsC,CAa3B;AACd;;AAEDJ,WAAW,CAAC,KAAD,CAAX;AAGA,eAAeR,MAAf","sourcesContent":["import { w3cwebsocket as W3CWebSocket } from \"websocket\"\n\nconst socket = new W3CWebSocket(((window.location.protocol === \"https:\") ? \"wss://\" : \"ws://\") + window.location.host + \"/ws\")\n\n\nsocket.onopen = () => {\n  console.log('WebSocket Client Connected');\n};\n\nfunction sendMessage(msg){\n    // Wait until the state of the socket is not ready and send the message when it is...\n    waitForSocketConnection(function(){\n        console.log(\"message sent!!!\");\n        socket.send(msg);\n    });\n}\n\n// Make the function wait until the connection is made...\nfunction waitForSocketConnection(callback){\n    setTimeout(\n        function () {\n            if (socket.readyState === 1) {\n                console.log(\"Connection is made\")\n                if (callback != null){\n                    callback();\n                }\n            } else {\n                console.log(\"wait for connection...\")\n                waitForSocketConnection(callback);\n            }\n\n        }, 5); // wait 5 milisecond for the connection...\n}\n\nsendMessage('hey')\n\n\nexport default socket;"]},"metadata":{},"sourceType":"module"}